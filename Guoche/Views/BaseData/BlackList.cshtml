@using Entity.ViewModel;
@using Common;
@{
    ViewBag.Title = "黑名单管理";
    List<BlackListEntity> line = (List<BlackListEntity>)ViewBag.BlackList;
    PagerInfo p = (PagerInfo)ViewBag.Pager;
}
<div class="row-fluid">
    <h2 class="heading" style="margin-top:20px">黑名单</h2>
</div>
<style>
    #div_items {
        width: 206px;
        height: 200px;
        border: 1px solid #66afe9;
        border-top: 0px;
        overflow: auto;
        display: none;
        position: absolute;
        background: #FFF;
        left: 400px;
    }

    .div_item {
        width: 100%;
        height: auto;
        margin-top: 1px;
        font-size: 13px;
        line-height: 20px;
        left:25px;
        list-style-type: none;
    }

    .div_itembuttom {
        width: 100%;
        height: auto;
        margin-top: 1px;
        font-size: 13px;
        line-height: 20px;
    }
    li:hover {
        background-color: #4278ea;
        color: #fff;
    }
</style>
<div class="row-fluid">
    <div class="widget widget-padding span12">
        <div class="widget-header">
            <i class="icon-laptop"></i>
            <h5 style="color:red">凡在此名单内的公司，车队，驾驶员均杜绝派发任何业务</h5>
            @*<div class="widget-buttons">
                <a href="/Carrier/Edit"><i class="icon-laptop"></i> 新增</a>
            </div>*@
        </div>
        <div class="widget-body" style="margin-bottom:50px">
            <div id="menus_wrapper" class="dataTables_wrapper form-inline" role="grid">
                <div class="row-fluid">
                    <div class="">
                        @*<form action="/Line/Index" method="get">
                            <div class="dataTables_length" id="menus_filter">
                                <label>线路: <input type="text" aria-controls="menus" id="LineID" onkeyup="value=value.replace(/[^\d]/g, '')" name="LineID" value="@ViewBag.LineID"></label>
                                <button class="btn btn-info" type="submit">搜索</button>
                            </div>
                        </form>*@
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="">
                        <div class="dataTables_length" id="menus_filter">
                            <input type="hidden" id="hid_BlackID" value="-1" />
                            <label>类别: 
                                <select class="span3" style="width: 200px" id="Type" name="Type">
                                    <option value="Carrier" @(ViewBag.BlackType == -1 ? "selected" : "")>承运商黑名单</option>
                                </select>
                            </label>
                            <label>
                                <input type="hidden" id="hid_UnionID" value="-1" />
                                公司名称/姓名: <input type="text" aria-controls="menus" autocomplete="off" id="UnionName" name="UnionName">
                                    <div id="div_items" style="display:none">                                   
                                    </div>                                
                            </label>
                            <label>拉黑缘由：</label>
                                @*<input type="text" id="Remark" name="Remark">*@
                            <textarea rows="30" cols="10" style="margin: 0px; height: 75px; width: 355px;" id="Remark" name="Remark"></textarea>
                        
                            <button class="btn btn-info" type="button" id="saveBlack">新增黑名单</button>
                        </div>
                    </div>
                </div>

                @if (line != null && line.Count > 0)
                {
                    <table id="users" style="width:90%" class="table table-striped table-bordered dataTable" aria-describedby="users_info">
                        <thead>
                            <tr role="row">
                                <th role="columnheader" tabindex="0" rowspan="1" colspan="1" style="width: 120px;">类型</th>
                                <th role="columnheader" tabindex="0" rowspan="1" colspan="1">黑名单名称</th>
                                <th role="columnheader" tabindex="0" rowspan="1" colspan="1">备注</th>
                                <th role="columnheader" tabindex="0" rowspan="1" colspan="1" style="width: 40px;">操作</th>
                            </tr>
                        </thead>
                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                            @foreach (BlackListEntity entity in line)
                            {
                                <tr>
                                    <td style="width:15%" class=" sorting_1">@entity.BlackTypeDesc</td>
                                    <td style="width:20%"  class=" ">@entity.UnionName</td>
                                    <td style="width:45%" class=" ">@entity.Remark</td>                                    
                                    <td style="width:10%">
                                        <a href="###" onclick="ModifyBlack(@entity.BlackID,'@entity.BlackType',@entity.UnionID,'@entity.UnionName','@entity.Remark')"><i class="icon-trash"></i> 修改</a>
                                            @*<a href="/BaseData/Delete?id=@entity.BlackID"><i class="icon-trash"></i> 删除</a>*@
                                    </td>
                                </tr>
                            }

                        </tbody>
                    </table>
                }
                @{ Html.RenderPartial("../Pager", p); }
            </div>
        </div> <!-- /widget-body -->
    </div> <!-- /widget -->
</div>
<div class="select2-drop select2-drop-multi select2-drop-active" id="div_tips" style="top: 1173px; left: 421px; width: 688px; display: none;">
    <ul class="select2-results">
        <li class="select2-results-dept-0 select2-result select2-disabled">
            <div class="select2-result-label">
                <span class="select2-match"></span>red
            </div>
        </li>
        <li class="select2-results-dept-0 select2-result select2-result-selectable select2-highlighted">
            <div class="select2-result-label">
                <span class="select2-match"></span>green
            </div>
        </li>
        <li class="select2-results-dept-0 select2-result select2-disabled">
            <div class="select2-result-label">
                <span class="select2-match"></span>blue
            </div>
        </li>
    </ul>
</div>
@section Footer{
<script type="text/javascript" src="~/source/bootstrap-fileinput/js/fileinput.js"></script>
<script type="text/javascript" src="~/source/bootstrap-fileinput/js/fileinput_locale_zh.js"></script>
<script type="text/javascript" src="~/source/BaseData/Black.js"></script>
    <script>
        $(document).ready(function () {
            LineInfo.init();
        });
    </script>
}
